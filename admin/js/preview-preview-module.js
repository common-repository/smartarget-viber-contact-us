!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"5Lbe":function(t,e,n){"use strict";n.r(e),e.default="<app-loader *ngIf=\"state === 'LOADING'\"></app-loader>\n"},SeyL:function(t,e,n){"use strict";n.r(e),e.default="::ng-deep .modal-content {\n  border-color: #dee2e6;\n  border-radius: 0 !important;\n}\n::ng-deep .modal-content .website-preview-header {\n  border-top: 0 !important;\n}\n::ng-deep .modal-backdrop {\n  background: none;\n}"},nZBp:function(n,i,r){"use strict";r.r(i),r.d(i,"PreviewModule",(function(){return I}));var a=r("mrSG"),o=r("fXoL"),s=r("ofXK"),p=r("tyNb"),c=r("/gHO"),l=r("1kSV"),u=r("FFcY"),d=r("s0Cq"),h=r("PgL3"),g=r("v0h+"),f=r("nYR2"),m=function(){function n(e,i,r,a){t(this,n),this.modalService=e,this.route=i,this.service=r,this.toastService=a,this.state=d.a.INITIAL,this.mode="DEMO",this.previewWebsite={url:"https://typical.design"},this.integrationData={token:null,integrationVariant:null,integrationSmartargetUserId:null,integrationAppSettingsFree:null,integrationAppSettingsFreePlus:null},this.platform=this.route.snapshot.params.platform,this.previewAppId=this.route.snapshot.params.previewAppId,this.integrationData.token=this.route.snapshot.params.token,this.integrationData.token&&(this.mode="INTEGRATION")}var i,r,o;return i=n,(r=[{key:"ngOnInit",value:function(){"INTEGRATION"===this.mode?this.getIntegrationSettings():this.openAppSettingsDialog()}},{key:"getIntegrationSettings",value:function(){var t=this;this.state=d.a.LOADING,this.service.getIntegrationSettings(this.platform,this.previewAppId,this.integrationData.token).pipe(Object(f.a)((function(){return t.state=d.a.INITIAL}))).subscribe((function(e){if(void 0!==e.website.id){t.previewWebsite=e.website;for(var n=e.website.appsSettings,i=0,r=n.length;i<r;i++)n[i].type===t.formattedAppId&&(t.integrationData.integrationAppSettingsFreePlus=n[i])}else t.previewWebsite.url=e.website;t.integrationData.integrationVariant=e.integrationVariant,t.integrationData.integrationSmartargetUserId=e.smartargetUserId,t.integrationData.integrationAppSettingsFree=e.freeAppParams,t.openAppSettingsDialog()}),(function(e){return t.toastService.show("Error: "+e.toString(),{classname:"alert alert-danger"})}))}},{key:"openAppSettingsDialog",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==(e=u.a.find((function(t){return t.type===i.formattedAppId})))){t.next=4;break}return t.abrupt("return");case 4:return(n=this.modalService.open(c.a,{centered:!0,windowClass:"app-settings-dialog"})).componentInstance.mode=this.mode,n.componentInstance.app=e,n.componentInstance.previewAppId=this.previewAppId,n.componentInstance.platform=this.platform.slice(0,1).toUpperCase()+this.platform.slice(1),n.componentInstance.allAppsMode="site"===this.platform||"all"===this.previewAppId,n.componentInstance.website=this.previewWebsite,n.componentInstance.demoWebsiteUrl=this.previewWebsite.url,n.componentInstance.integrationData=this.integrationData,t.next=15,n.result;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),this.toastService.show(""+t.t0.toString(),{classname:"alert alert-danger"});case 20:case"end":return t.stop()}}),t,this,[[0,17]])})))}},{key:"formattedAppId",get:function(){return"all"===this.previewAppId?"whatsapp":"exit_popup"===this.previewAppId?"exit_preventor":"information_message"===this.previewAppId?"flash_cards":"follow_us"===this.previewAppId?"social_follow_bar":this.previewAppId}}])&&e(i.prototype,r),o&&e(i,o),n}();m.ctorParameters=function(){return[{type:l.d},{type:p.a},{type:h.a},{type:g.a}]};var v=[{path:"",component:m=Object(a.b)([Object(o.n)({selector:"app-preview",template:Object(a.c)(r("5Lbe")).default,styles:[Object(a.c)(r("SeyL")).default]})],m)}],b=function e(){t(this,e)};b=Object(a.b)([Object(o.L)({imports:[p.d.forChild(v)],exports:[p.d]})],b);var w=r("PCNd"),I=function e(){t(this,e)};I=Object(a.b)([Object(o.L)({declarations:[m],imports:[s.b,b,w.a]})],I)}}])}();